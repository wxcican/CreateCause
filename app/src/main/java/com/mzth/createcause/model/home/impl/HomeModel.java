package com.mzth.createcause.model.home.impl;import android.os.Handler;import android.os.Message;import android.util.Log;import com.lzy.okgo.OkGo;import com.lzy.okgo.callback.StringCallback;import com.lzy.okgo.model.Response;import com.mzth.createcause.entity.home.HomeEntity;import com.mzth.createcause.model.home.IHomeModel;import com.mzth.createcause.util.ConfigUtil;import org.json.JSONException;import org.json.JSONObject;import java.util.ArrayList;import java.util.List;/** * Created by Administrator on 2018/1/12 0012. */public class HomeModel implements IHomeModel {    private static HomeModel mHomeModel;    private HomeModel() {    }    /**     * 获取首页数据接口     *     * @return     */    public static IHomeModel getIHomeModel() {        if (mHomeModel == null) {            mHomeModel = new HomeModel();        }        return mHomeModel;    }    @Override    public void getHomeData(int page, final Handler handler) {        OkGo.<String>post(ConfigUtil.HOME_LIST)                .params("page",page+"")                .params("length","16")                .execute(new StringCallback() {            @Override            public void onSuccess(Response<String> response) {                try {                    HomeEntity homeEntity = new HomeEntity(new JSONObject(response.body()));                    Message mMessage = Message.obtain();                    mMessage.obj = homeEntity;                    mMessage.what = 1;                    handler.sendMessage(mMessage);                } catch (JSONException e) {                    e.printStackTrace();                }            }            @Override            public void onFinish() {                super.onFinish();                handler.sendEmptyMessage(0);            }            @Override            public void onError(Response<String> response) {                super.onError(response);                handler.sendEmptyMessage(2);            }        });    }}