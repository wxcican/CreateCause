package com.mzth.createcause.entity.core;import android.util.Log;import org.json.JSONArray;import org.json.JSONObject;import java.util.ArrayList;import java.util.List;/** * Created by 解析资讯详情数据 on 2018/1/25 0025. */public class AnalyNewsInfoEntity {    private boolean isComment = false;    private String err_msg;    private int status;    private List<NewsInfoEntity> mNewsInfoEntitys = new ArrayList<>();    public AnalyNewsInfoEntity(JSONObject jsonObject) {        if (jsonObject != null) {            status = jsonObject.optInt("status", 0);            if (status == 1) {                JSONObject result = jsonObject.optJSONObject("result");                if (result != null) {                    //详情数据                    JSONObject newsJSONObject = result.optJSONObject("news");                    //推荐数据                    JSONArray mJSONArrayReCommend = result.optJSONArray("list");                    //评论数据                    JSONArray mJSONArrayComment = result.optJSONArray("comment");                    //详情数据                    if (newsJSONObject != null) {                        NewsInfoEntity mNewsInfoEntityUser = new NewsInfoEntity(NewsInfoEntity.TYPE_USER);                        //发布者ID                        mNewsInfoEntityUser.setUserID(newsJSONObject.optString("uid"));                        //发布者头像                        mNewsInfoEntityUser.setUserImg(newsJSONObject.optString("avatar"));                        //发布者昵称                        mNewsInfoEntityUser.setUserName(newsJSONObject.optString("nick_name"));                        //发布时间                        mNewsInfoEntityUser.setUserTime(newsJSONObject.optString("add_time"));                        //资讯标题                        mNewsInfoEntityUser.setUserTitle(newsJSONObject.optString("title"));                        //视频链接                        mNewsInfoEntityUser.setUserVideo(newsJSONObject.optString("vid", ""));                        //评论量                        mNewsInfoEntityUser.setUserComment(newsJSONObject.optString("comment", "0"));                        //发布内容                        mNewsInfoEntityUser.setUserContent(newsJSONObject.optString("content"));                        //视频封面                        mNewsInfoEntityUser.setUserVideoImage(newsJSONObject.optString("image", ""));                        mNewsInfoEntitys.add(mNewsInfoEntityUser);                    }                    //推荐数据                    if (mJSONArrayReCommend != null) {                        //如果有相关推荐数据则设置标题栏                        if (mJSONArrayReCommend.length() != 0) {                            NewsInfoEntity mNewsInfoEntityNavation = new NewsInfoEntity(NewsInfoEntity.TYPE_NAVIGATION);                            mNewsInfoEntityNavation.setNaviGation("相关推荐");                            mNewsInfoEntitys.add(mNewsInfoEntityNavation);                        }                        for (int i = 0; i < mJSONArrayReCommend.length(); i++) {                            NewsInfoEntity mRecommendNewsInfoEntity = new NewsInfoEntity(NewsInfoEntity.TYPE_RECOMMEND);                            JSONObject mRecommendJsonObject = mJSONArrayReCommend.optJSONObject(i);                            //推荐ID                            mRecommendNewsInfoEntity.setRecommendId(mRecommendJsonObject.optString("id"));                            //推荐Title                            mRecommendNewsInfoEntity.setRecommendTitle(mRecommendJsonObject.optString("title"));                            //推荐类型                            mRecommendNewsInfoEntity.setRecommendType(mRecommendJsonObject.optString("cat_name"));                            //推荐评论量                            mRecommendNewsInfoEntity.setRecommendComment(mRecommendJsonObject.optString("comment", "0"));                            //推荐时间                            mRecommendNewsInfoEntity.setRecommendTime(mRecommendJsonObject.optString("add_time"));                            //推荐封面图                            mRecommendNewsInfoEntity.setRecommendImg(mRecommendJsonObject.optString("image", ""));                            mNewsInfoEntitys.add(mRecommendNewsInfoEntity);                        }                    }                    NewsInfoEntity moreNewsInfoEntity = new NewsInfoEntity(NewsInfoEntity.TYPE_MORE);                    //评论数据                    if (mJSONArrayComment != null) {                        if (mJSONArrayComment.length() != 0) {                            NewsInfoEntity mNewsInfoEntityNavation = new NewsInfoEntity(NewsInfoEntity.TYPE_NAVIGATION);                            mNewsInfoEntityNavation.setNaviGation("热门评论");                            mNewsInfoEntitys.add(mNewsInfoEntityNavation);                            if (mJSONArrayComment.length() > 0 && mJSONArrayComment.length() < 10) {                                moreNewsInfoEntity.setMoreText("暂无更多评论");                            }                            if (mJSONArrayComment.length() >= 10) {                                moreNewsInfoEntity.setMoreText("查看更多评论");                            }                        } else {                            moreNewsInfoEntity.setMoreText("暂无评论");                        }                        for (int i = 0; i < mJSONArrayComment.length(); i++) {                            JSONObject commentJsonObject = mJSONArrayComment.optJSONObject(i);                            NewsInfoEntity mCommentNewsInfoEntity = new NewsInfoEntity(NewsInfoEntity.TYPE_COMMEND);                            //评论ID                            mCommentNewsInfoEntity.setCommentId(commentJsonObject.optString("id"));                            //评论用户ID                            mCommentNewsInfoEntity.setCommentUserId(commentJsonObject.optString("user_id"));                            //评论用户头像                            mCommentNewsInfoEntity.setCommentImg(commentJsonObject.optString("avatar"));                            //评论用户昵称                            mCommentNewsInfoEntity.setCommentName(commentJsonObject.optString("nick_name"));                            //评论时间                            mCommentNewsInfoEntity.setCommentTime(commentJsonObject.optString("add_time"));                            //评论点赞数                            mCommentNewsInfoEntity.setCommentGoodNum(commentJsonObject.optString("zan_num"));                            //评论内容                            mCommentNewsInfoEntity.setCommentContent(commentJsonObject.optString("content"));                            //是否点赞                            mCommentNewsInfoEntity.setCommentGood(commentJsonObject.optInt("is_good"));                            //评论回复数据                            JSONArray replyJsonArray = commentJsonObject.optJSONArray("children");                            if (replyJsonArray == null) {                                //评论回复量                                mCommentNewsInfoEntity.setCommentReplyNum("0");                            } else {                                mCommentNewsInfoEntity.setCommentReplyNum(replyJsonArray.length() + "");                                mNewsInfoEntitys.add(mCommentNewsInfoEntity);                                for (int j = 0; j < replyJsonArray.length(); j++) {                                    JSONObject RepluJsonObject = replyJsonArray.optJSONObject(j);                                    NewsInfoEntity mRepluNewsInfoEntity = new NewsInfoEntity(NewsInfoEntity.TYPE_REPLY);                                    mRepluNewsInfoEntity.setReplyId(RepluJsonObject.optString("id"));                                    mRepluNewsInfoEntity.setReplyCommentId(RepluJsonObject.optString("comment_id"));                                    mRepluNewsInfoEntity.setReplyUserId(RepluJsonObject.optString("user_id"));                                    mRepluNewsInfoEntity.setReplyName(RepluJsonObject.optString("user_name"));                                    mRepluNewsInfoEntity.setReplyContent(RepluJsonObject.optString("content"));                                    mRepluNewsInfoEntity.setReplyToUserID(RepluJsonObject.optString("to_user_id", "0"));                                    mRepluNewsInfoEntity.setReplyToUserName(RepluJsonObject.optString("to_user_name", ""));                                    mNewsInfoEntitys.add(mRepluNewsInfoEntity);                                }                            }                        }                    }                    mNewsInfoEntitys.add(moreNewsInfoEntity);                    //编辑按钮                    mNewsInfoEntitys.add(new NewsInfoEntity(NewsInfoEntity.TYPE_EDIT));                } else {                    err_msg = jsonObject.optString("err_msg", "发现未知异常，请稍后重试");                }            }        }    }    public String getErr_msg() {        return err_msg;    }    public int getStatus() {        return status;    }    public List<NewsInfoEntity> getmNewsInfoEntitys() {        return mNewsInfoEntitys;    }}