package com.mzth.createcause.view.fragment.user.money.income.impl;import android.app.Dialog;import android.support.v7.widget.LinearLayoutManager;import android.support.v7.widget.RecyclerView;import android.util.Log;import android.view.View;import android.widget.ImageView;import android.widget.TextView;import com.lzy.okgo.OkGo;import com.lzy.okgo.callback.StringCallback;import com.lzy.okgo.model.Response;import com.lzy.okgo.request.base.Request;import com.mzth.createcause.R;import com.mzth.createcause.adapter.user.InComeAdapter;import com.mzth.createcause.base.BaseActivity;import com.mzth.createcause.entity.user.InComenInfoEntity;import com.mzth.createcause.util.CommonUtil;import com.mzth.createcause.util.ConfigUtil;import com.mzth.createcause.util.DividerItemDecoration;import org.json.JSONException;import org.json.JSONObject;import java.util.ArrayList;import java.util.List;/** * 收入明细 */public class InComeInfoActivity extends BaseActivity {    private RecyclerView rv_user_income;    private TextView base_title;    private ImageView base_iv;    private TextView base_tv;    private TextView tv_in_come_info_1;    private Dialog dialog;    private List<InComenInfoEntity.InComeInfoList> mInComeInfoLists=new ArrayList<>();    private InComeAdapter mInComeAdapter;    @Override    protected void setActivity() {        setContentView(R.layout.activity_in_come_info);    }    @Override    protected void initView() {        base_title = CommonUtil.getCommonUtil().bindView(this, R.id.base_title);        base_iv = CommonUtil.getCommonUtil().bindView(this, R.id.base_iv);        base_tv = CommonUtil.getCommonUtil().bindView(this, R.id.base_tv);        rv_user_income = CommonUtil.getCommonUtil().bindView(this, R.id.rv_user_income);        tv_in_come_info_1 = CommonUtil.getCommonUtil().bindView(this, R.id.tv_in_come_info_1);    }    @Override    protected void initSet() {        base_title.setText("收入明细");        base_iv.setVisibility(View.GONE);        base_tv.setVisibility(View.GONE);    }    @Override    protected void initAdapter() {        mInComeAdapter = new InComeAdapter(mInComeInfoLists);        rv_user_income.setLayoutManager(new LinearLayoutManager(mContext, LinearLayoutManager.VERTICAL, false));        rv_user_income.addItemDecoration(new DividerItemDecoration(mContext, LinearLayoutManager.HORIZONTAL,                CommonUtil.getCommonUtil().convertDIP(5),                getResources().getColor(R.color.colorBackround)));        rv_user_income.setAdapter(mInComeAdapter);        mInComeAdapter.setEmptyView(mNoDataView);    }    @Override    protected void initData() {        OkGo.<String>post(ConfigUtil.PROPERTY_LIST)                .params("user_id", userId)                .params("auth_key", userKey)                .execute(new StringCallback() {                    @Override                    public void onStart(Request<String, ? extends Request> request) {                        super.onStart(request);                        dialog = CommonUtil.getCommonUtil().ejectLaoding(mContext, "正在加载");                    }                    @Override                    public void onError(Response<String> response) {                        super.onError(response);                        CommonUtil.getCommonUtil().toast(ConfigUtil.HINT_OVERTIME);                    }                    @Override                    public void onFinish() {                        super.onFinish();                        if (dialog != null && dialog.isShowing()) {                            dialog.dismiss();                            dialog = null;                        }                    }                    @Override                    public void onSuccess(Response<String> response) {                        try {                            InComenInfoEntity mInComenInfoEntity=new InComenInfoEntity(new JSONObject(response.body()));                            int status = mInComenInfoEntity.getStatus();                            if(status==1){                                tv_in_come_info_1.setText(mInComenInfoEntity.getTotal());                                mInComeInfoLists.clear();                                mInComeInfoLists.addAll(mInComenInfoEntity.getmInComeInfoLists());                                mInComeAdapter.notifyDataSetChanged();                            }else {                                CommonUtil.getCommonUtil().toast(mInComenInfoEntity.getErr_msg());                            }                        } catch (JSONException e) {                            e.printStackTrace();                        }                    }                });    }    @Override    protected void initListener() {    }    /*@Override    public void initAdapter(List<InComeInfo> inComeInfos) {        InComeAdapter mInComeAdapter = new InComeAdapter(inComeInfos);        rv_user_income.setLayoutManager(new LinearLayoutManager(mContext, LinearLayoutManager.VERTICAL, false));        rv_user_income.addItemDecoration(new DividerItemDecoration(mContext, LinearLayoutManager.HORIZONTAL,                CommonUtil.getCommonUtil().convertDIP(5),                getResources().getColor(R.color.colorBackround)));        rv_user_income.setAdapter(mInComeAdapter);        mInComeAdapter.setOnItemClickListener(new BaseQuickAdapter.OnItemClickListener() {            @Override            public void onItemClick(BaseQuickAdapter adapter, View view, int position) {                Intent mIntent = new Intent();                switch (position) {                    case 0:                        mIntent.setClass(mContext, ShareEssayActivity.class);                        break;                    case 1:                        mIntent.setClass(mContext, ReleaseEssayActivity.class);                        break;                    case 2:                        mIntent.setClass(mContext, InviteVIPActivity.class);                        break;                    case 3:                        mIntent.setClass(mContext, InviteOutActivity.class);                        break;                    case 4:                        mIntent.setClass(mContext, SearchEnginesActivity.class);                        break;                }                startActivity(mIntent);            }        });    }*/}