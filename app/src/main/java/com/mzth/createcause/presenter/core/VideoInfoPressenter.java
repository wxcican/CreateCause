package com.mzth.createcause.presenter.core;import android.text.TextUtils;import com.lzy.okgo.callback.StringCallback;import com.lzy.okgo.model.Response;import com.lzy.okgo.request.base.Request;import com.mzth.createcause.base.BasePresenter;import com.mzth.createcause.entity.core.AnalyNewsInfoCommentEntity;import com.mzth.createcause.entity.core.AnalyNewsInfoEntity;import com.mzth.createcause.entity.core.NewsInfoEntity;import com.mzth.createcause.model.core.InfromationVideoDataModel;import com.mzth.createcause.view.fragment.video.IVideoInfoActivity;import org.json.JSONException;import org.json.JSONObject;import java.util.List;/** * Created by 视频详情管理器 on 2017/10/31 0031. */public class VideoInfoPressenter extends BasePresenter{    private IVideoInfoActivity iVideoInfoActivity;    /**     * 获取UI     *     * @param iVideoInfoActivity     */    public void initIVideoInfoActivity(IVideoInfoActivity iVideoInfoActivity) {        this.iVideoInfoActivity = iVideoInfoActivity;    }    /**     * 初始化适配器详情数据     * @param news_id     */    public void initVideoInfoData(String news_id){        InfromationVideoDataModel.getICoreInfoData().queryCoreInfoData(news_id, new StringCallback() {            @Override            public void onStart(Request<String, ? extends Request> request) {                super.onStart(request);                if(iVideoInfoActivity!=null){                    iVideoInfoActivity.onRequestStart();                }            }            @Override            public void onError(Response<String> response) {                super.onError(response);                if(iVideoInfoActivity!=null){                    iVideoInfoActivity.onRequestError();                }            }            @Override            public void onFinish() {                super.onFinish();                if(iVideoInfoActivity!=null){                    iVideoInfoActivity.onRequestFinish();                }            }            @Override            public void onSuccess(Response<String> response) {                try {                    AnalyNewsInfoEntity mAnalyNewsInfoEntity = new AnalyNewsInfoEntity(new JSONObject(response.body()));                    if (mAnalyNewsInfoEntity.getStatus() == 1) {                        if (iVideoInfoActivity != null) {                            iVideoInfoActivity.initVideoInfoData(mAnalyNewsInfoEntity.getmNewsInfoEntitys());                        }                    } else {                        if (iVideoInfoActivity != null) {                            iVideoInfoActivity.onToast(mAnalyNewsInfoEntity.getErr_msg());                        }                    }                } catch (JSONException e) {                    e.printStackTrace();                }            }        });    }    public void queryCommentData(String id, int page, final List<NewsInfoEntity> mNewsInfoEntitys) {        if (!TextUtils.isEmpty(id) && mNewsInfoEntitys != null) {            InfromationVideoDataModel.getICoreInfoData().queryCoreInfoCommentData(id, page + "", user_Id, new StringCallback() {                @Override                public void onSuccess(Response<String> response) {                    try {                        AnalyNewsInfoCommentEntity mAnalyNewsInfoCommentEntity = new AnalyNewsInfoCommentEntity(new JSONObject(response.body()), mNewsInfoEntitys);                        if (mAnalyNewsInfoCommentEntity.getStatus() == 1) {                            if (iVideoInfoActivity != null) {                                iVideoInfoActivity.initVideoInfoCommentData(mAnalyNewsInfoCommentEntity.getmNewsInfoEntityList());                            }                        } else {                            if (iVideoInfoActivity != null) {                                iVideoInfoActivity.onToast(mAnalyNewsInfoCommentEntity.getErr_msg());                            }                        }                    } catch (JSONException e) {                        e.printStackTrace();                    }                }            });        }    }}