package com.mzth.createcause.presenter.home;import android.os.Handler;import android.os.Message;import com.mzth.createcause.entity.home.HomeEntity;import com.mzth.createcause.model.home.impl.HomeModel;import com.mzth.createcause.view.fragment.home.IHomeFragment;/** * Created by Administrator on 2018/1/12 0012. */public class HomePressenter {    private static HomePressenter mHomePressenter;    private IHomeFragment mIHomeFragment;    public static final int TYPE_DATA=101;    public static final int TYPE_REFRESH=102;    public static final int TYPE_LOAD=103;    private int type=TYPE_DATA;    private HomePressenter() {    }    public static HomePressenter getHomePressenter() {        if (mHomePressenter == null) {            mHomePressenter = new HomePressenter();        }        return mHomePressenter;    }    /**     * 初始化接口     *     * @param iHomeFragment     */    public void initHomeInterface(IHomeFragment iHomeFragment) {        this.mIHomeFragment = iHomeFragment;    }    /**     * 初始化数据     */    public void initData() {        type=TYPE_DATA;        mIHomeFragment.ejectLoad(true);        HomeModel.getIHomeModel().getHomeData(0, mHandler);    }    /**     * 刷新数据     */    public void refreshData() {        type=TYPE_REFRESH;        HomeModel.getIHomeModel().getHomeData(0, mHandler);    }    /**     * 加载数据     * @param page     */    public void loadData(int page) {        type=TYPE_LOAD;        HomeModel.getIHomeModel().getHomeData(page, mHandler);    }    private Handler mHandler = new Handler() {        @Override        public void handleMessage(Message msg) {            super.handleMessage(msg);            switch (msg.what) {                case 0:                    if (mIHomeFragment != null) {                        mIHomeFragment.ejectLoad(false);                    }                    break;                case 1:                    if (mIHomeFragment != null) {                        HomeEntity homeEntity = (HomeEntity) msg.obj;                        if(type==TYPE_DATA){                            mIHomeFragment.initAdapter(homeEntity);                        }else if(type==TYPE_REFRESH){                            mIHomeFragment.initRefResh(homeEntity);                        }else {                            mIHomeFragment.loadData(homeEntity);                        }                    }                    break;                case 2:                    if (mIHomeFragment != null) {                        mIHomeFragment.onRequestError();                    }                    break;            }        }    };}