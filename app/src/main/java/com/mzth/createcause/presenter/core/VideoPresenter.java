package com.mzth.createcause.presenter.core;import com.lzy.okgo.callback.StringCallback;import com.lzy.okgo.model.Response;import com.lzy.okgo.request.base.Request;import com.mzth.createcause.base.BasePresenter;import com.mzth.createcause.entity.core.CoreContentEntity;import com.mzth.createcause.entity.core.CoreTypeEntity;import com.mzth.createcause.model.core.InfromationVideoDataModel;import com.mzth.createcause.view.fragment.video.IVideoContentFragment;import com.mzth.createcause.view.fragment.video.IVideoFragment;import org.json.JSONException;import org.json.JSONObject;/** * Created by Administrator on 2018/1/17 0017. */public class VideoPresenter extends BasePresenter {    private IVideoFragment mIVideoFragment;    private IVideoContentFragment mIVideoContentFragment;    /**     * 初始化视频界面     *     * @param iVideoFragment     */    public void initVideoFragment(IVideoFragment iVideoFragment) {        this.mIVideoFragment = iVideoFragment;    }    /**     * 初始化视频内容界面     *     * @param iVideoContentFragment     */    public void initIVideoContentFragment(IVideoContentFragment iVideoContentFragment) {        this.mIVideoContentFragment = iVideoContentFragment;    }    /**     * 获取分类数据     */    public void getTypeData() {        InfromationVideoDataModel.getInfromationVideoType().queryType(new StringCallback() {            @Override            public void onStart(Request<String, ? extends Request> request) {                super.onStart(request);                if (mIVideoFragment != null) {                    mIVideoFragment.onRequestStart();                }            }            @Override            public void onFinish() {                super.onFinish();                if (mIVideoFragment != null) {                    mIVideoFragment.onRequestFinish();                }            }            @Override            public void onError(Response<String> response) {                super.onError(response);                if (mIVideoFragment != null) {                    mIVideoFragment.onRequestError();                }            }            @Override            public void onSuccess(Response<String> response) {                try {                    CoreTypeEntity mInfromactionTypeEntity = new CoreTypeEntity(new JSONObject(response.body()));                    if (mInfromactionTypeEntity.getStatus() == 1) {                        if (mIVideoFragment != null) {                            mIVideoFragment.typeData(mInfromactionTypeEntity.getInfromactionTypeLists());                        }                    } else {                        if (mIVideoFragment != null) {                            mIVideoFragment.onToast(mInfromactionTypeEntity.getErr_msg());                        }                    }                } catch (JSONException e) {                    e.printStackTrace();                }            }        });    }    /**     * 获取数据     */    public void getCoreContentData(String typeID, String type, String page) {        InfromationVideoDataModel.getInfromationVideoContent().queryContent(typeID, type, page, new StringCallback() {            @Override            public void onStart(Request<String, ? extends Request> request) {                super.onStart(request);                if (mIVideoContentFragment != null) {                    mIVideoContentFragment.onRequestStart();                }            }            @Override            public void onError(Response<String> response) {                super.onError(response);                if (mIVideoContentFragment != null) {                    mIVideoContentFragment.onRequestError();                }            }            @Override            public void onFinish() {                super.onFinish();                if (mIVideoContentFragment != null) {                    mIVideoContentFragment.onRequestFinish();                }            }            @Override            public void onSuccess(Response<String> response) {                if (mIVideoContentFragment != null) {                    try {                        mIVideoContentFragment.videoContentData(new CoreContentEntity(new JSONObject(response.body())));                    } catch (JSONException e) {                        e.printStackTrace();                    }                }            }        });    }    /**     * 刷新数据     *     * @param typeID     * @param type     * @param page     */    public void getRefreshCoreContentData(String typeID, String type, String page) {        InfromationVideoDataModel.getInfromationVideoContent().queryContent(typeID, type, page, new StringCallback() {            @Override            public void onSuccess(Response<String> response) {                if (mIVideoContentFragment != null) {                    try {                        CoreContentEntity mCoreContentEntity = new CoreContentEntity(new JSONObject(response.body()));                        if (mCoreContentEntity.getStatus() == 1) {                            mIVideoContentFragment.videoRefreshContentData(mCoreContentEntity);                        } else {                            mIVideoContentFragment.onToast(mCoreContentEntity.getErr_msg());                        }                    } catch (JSONException e) {                        e.printStackTrace();                    }                }            }            @Override            public void onError(Response<String> response) {                super.onError(response);                if (mIVideoContentFragment != null) {                    mIVideoContentFragment.onRequestError();                }            }            @Override            public void onFinish() {                super.onFinish();                if (mIVideoContentFragment != null) {                    mIVideoContentFragment.onRequestFinish();                }            }        });    }    /**     * 加载数据     *     * @param typeID     * @param type     * @param page     */    public void getLoadCoreContentData(String typeID, String type, String page) {        InfromationVideoDataModel.getInfromationVideoContent().queryContent(typeID, type, page, new StringCallback() {            @Override            public void onSuccess(Response<String> response) {                try {                    mIVideoContentFragment.videoLoadCoreContentData(new CoreContentEntity(new JSONObject(response.body())));                } catch (JSONException e) {                    e.printStackTrace();                }            }        });    }}