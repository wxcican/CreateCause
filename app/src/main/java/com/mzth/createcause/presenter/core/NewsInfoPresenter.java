package com.mzth.createcause.presenter.core;import android.text.TextUtils;import android.util.Log;import com.lzy.okgo.callback.StringCallback;import com.lzy.okgo.model.Response;import com.lzy.okgo.request.base.Request;import com.mzth.createcause.base.BasePresenter;import com.mzth.createcause.entity.core.AnalyNewsInfoCommentEntity;import com.mzth.createcause.entity.core.AnalyNewsInfoEntity;import com.mzth.createcause.entity.core.NewsInfoEntity;import com.mzth.createcause.model.core.InfromationVideoDataModel;import com.mzth.createcause.view.fragment.news.INewsInfoActivity;import org.json.JSONException;import org.json.JSONObject;import java.util.List;/** * Created by 资讯详情控制器 on 2018/1/25 0025. */public class NewsInfoPresenter extends BasePresenter {    private INewsInfoActivity mINewsInfoActivity;    public void initINewsInfoActivity(INewsInfoActivity iNewsInfoActivity) {        this.mINewsInfoActivity = iNewsInfoActivity;    }    public void queryData(String id) {        InfromationVideoDataModel.getICoreInfoData().queryCoreInfoData(id, new StringCallback() {            @Override            public void onStart(Request<String, ? extends Request> request) {                super.onStart(request);                if (mINewsInfoActivity != null) {                    mINewsInfoActivity.onRequestStart();                }            }            @Override            public void onError(Response<String> response) {                super.onError(response);                if (mINewsInfoActivity != null) {                    mINewsInfoActivity.onRequestError();                }            }            @Override            public void onFinish() {                super.onFinish();                if (mINewsInfoActivity != null) {                    mINewsInfoActivity.onRequestFinish();                }            }            @Override            public void onSuccess(Response<String> response) {                try {                    AnalyNewsInfoEntity mAnalyNewsInfoEntity = new AnalyNewsInfoEntity(new JSONObject(response.body()));                    if (mAnalyNewsInfoEntity.getStatus() == 1) {                        if (mINewsInfoActivity != null) {                            mINewsInfoActivity.initNewsInfoData(mAnalyNewsInfoEntity.getmNewsInfoEntitys());                        }                    } else {                        if (mINewsInfoActivity != null) {                            mINewsInfoActivity.onToast(mAnalyNewsInfoEntity.getErr_msg());                        }                    }                } catch (JSONException e) {                    e.printStackTrace();                }            }        });    }    public void queryCommentData(String id, int page, final List<NewsInfoEntity> mNewsInfoEntitys) {        if (!TextUtils.isEmpty(id) && mNewsInfoEntitys != null) {            InfromationVideoDataModel.getICoreInfoData().queryCoreInfoCommentData(id, page + "", user_Id, new StringCallback() {                @Override                public void onSuccess(Response<String> response) {                    try {                        AnalyNewsInfoCommentEntity mAnalyNewsInfoCommentEntity = new AnalyNewsInfoCommentEntity(new JSONObject(response.body()), mNewsInfoEntitys);                        if (mAnalyNewsInfoCommentEntity.getStatus() == 1) {                            if (mINewsInfoActivity != null) {                                mINewsInfoActivity.initNewsInfoCommentData(mAnalyNewsInfoCommentEntity.getmNewsInfoEntityList());                            }                        } else {                            if (mINewsInfoActivity != null) {                                mINewsInfoActivity.onToast(mAnalyNewsInfoCommentEntity.getErr_msg());                            }                        }                    } catch (JSONException e) {                        e.printStackTrace();                    }                }            });        }    }}